"use strict";!function(e){e.validation.init({insertMessages:!1,errorsAsTitle:!1,messagesOnModified:!1,decorateElementOnModified:!1,registerExtenders:!0,grouping:{deep:!0,observable:!0,live:!0}})}(ko),function(e){e.extenders.validation=function(n,i){return n.invalid=e.computed(function(){return!e.validatedObservable({target:n}).isValid()},this),n}}(ko),function(e,n){e.VipLoginViewModel=function(i,o){var s=this;s.nicknameValueHasChanged=n.observable(!1),s.passwordValueHasChanged=n.observable(!1),s.latitude=n.observable(-1),s.longitude=n.observable(-1),s.nickname=n.observable().extend({required:!0,validation:{},minLength:1,maxLength:40}),s.password=n.observable().extend({required:!0,validation:{},maxLength:40}),s.nickname.subscribe(function(e){""!==e&&s.nicknameValueHasChanged(!0)}),s.nicknameErrorIsVisible=n.pureComputed(function(){return s.nicknameValueHasChanged()&&s.nickname.invalid()}),s.password.subscribe(function(e){""!==e&&s.passwordValueHasChanged(!0)}),s.passwordErrorIsVisible=n.pureComputed(function(){return s.passwordValueHasChanged()&&s.password.invalid()}),s.canConnectToChat=n.computed(function(){return!s.nickname.invalid()&&!s.password.invalid()}),s.connectToChat=function(){if(1==o.getCMPStatus()){var n=new window.system.Message(window.getFeedbackMessageResource("cmpMessage3"),e.MessageType.Info);return window.feedBack.showSweetAlert(n),!1}return s.canConnectToChat()?(window.spinner.show(),!0):(s.nicknameValueHasChanged(!0),s.passwordValueHasChanged(!0),!1)},s.encodePassword=function(e){return e},s.decodePassword=function(e){return e},s.getVIPLoginInfos=function(){return o.getVIPLoginInfos()},s.onGettingCoordinates=function(e,n){s.latitude(n.latitude),s.longitude(n.longitude)};var a=i.subscribe("ChatterCoordinates",s.onGettingCoordinates);s.initializeForm=function(){var e=s.getVIPLoginInfos();void 0!==e&&null!==e&&(s.nickname(e.name),s.password(s.decodePassword(e.password)))},s.initializeForm(),s.dispose=function(){i.unsubscribe(a)},s.passwordFocused=n.observable(!1),s.passwordFocused.subscribe(function(){s.passwordFocused()?$("#Password")[0].type="text":$("#Password")[0].type="password"})}}(window.system||(window.system={}),ko),function(e,n,i,o,s,a){i(function(){var t=new e.CookieService(o),r=new e.VipLoginViewModel(s,t);if(n.applyBindings(r),s.publish("PromptGeolocation",{}),window.analytics.trackPageView("Home/Login","Account/VIPLogin"),""!==i("#htmlValidation").html()&&void 0!==i("#htmlValidation").html()){var d=new window.system.Message(i("#htmlValidation").html(),a.Error);window.feedBack.handleError({},d)}})}(window.system||(window.system={}),ko,jQuery,Cookies,PubSub,system.MessageType);